# Project Plan

## AI Directive
1. Create comprehensive project plan (if not already exisit)
2. If project plan already exist, modify and update as work progress.
3. Modify and update tasks.md as needed as project progress.
5. Run all tests in virtual environment using uv.
6. After completing each phase, summarize at a high level the work completed.  Log the summary in the format specified within the log folder.
7. When executing the test during the conversation: 
    - Display the heading with "FEATURE TEST: Phase xx - new_feature"
    - Display test input and test output 
    - If test fail, display failure in red in the console.
    - If test is successful, display success in green in the console.
8. Do not build project structure unless it is explicitly directed in this project plan.
9. Bash scripts should be saved to `scripts` folder.
10. Documentation generated by AI should be saved to `docs` folder.

## Project Type and Structure
- This is a **standalone application**, NOT a distributable library
- Use a flat module structure directly in src/ folder
- Do NOT create nested package folders (no src/ibxpy_ai/)
- Main entry point should be src/main.py
- Import pattern: modules are imported directly from src/

## Goal
- Build a python app to trade stock using interactive broker trader workstation.
- Use the python package ibapi which is published interactive broker. 
- Do not use third party package such as ib_async, ib_insync or ibridepy.

## Phase 1 - Requirements  
- Create a file call requirements.md.
- Store the requirement.md file in the folder `ctx-ai/ibxpy`.
- In the requirements, explain what are the technical requirements that are
needed for development of trading app.
- In another section, list the python packages that are needed and why this is
required.
- Please feel free to add additional sections to explain anything else.
- When this phase is completed, log a summary of what has been done in phase and
save with format phase_log_yyyymmdd.md

## Phase 2 - Setup Virtual Environment
- Build python virtual environment using uv.
- Install required packages in virtual environments
- If there are changes to the pyproject.toml file, review and install or remove
  unnecessary packages.

## Phase 3 - IBKR native python package ibapi installation
- The ibapi python package is not part of the pypi library.
- This package can be found in `~/Downloads/twsapi/`.
- Install ibapi in the virtual environment
- Follow the instruction provided in the file ibapi_install_guide.md.  Update
this file as needed.

## Phase 4 - IBKR IBGateway Installation
- Feature: Install Gateway
  - Installation of IBGateway
- Feature: IBGateway startup
  - Implement IBGateway startup script
  - Use credentials store in file to start ibgateway
- Test: Check whether IBGateway has been installed
- Test: Run IBGateway with proper credential
- Test: Check if IBGateway is running

## Phase 6 - Setup Folder Structure
- This is a **standalone application**, NOT a distributable library
- Use a flat module structure directly in src/ folder
- Do NOT create nested package folders (no src/ibxpy_ai/)
- Main entry point should be src/main.py

## Phase 6 - Established connection to TWS (Trader Workstation)
### Feature
- Do not implement testing. Only write or modify code in this phase.
- Implement the connection to TWS on port 7500 on localhost.
### Test
- Build the test.  Do not build another test except for this phase.
- Run the test in a virtual environment us uv.  Do not run any other test.  

